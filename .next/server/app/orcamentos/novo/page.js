(()=>{var e={};e.id=673,e.ids=[673],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7704:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(2365),s(564),s(7629),s(5866);var a=s(3191),r=s(8716),l=s(7922),n=s.n(l),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["orcamentos",{children:["novo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2365)),"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\orcamentos\\novo\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,564)),"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\orcamentos\\novo\\page.tsx"],u="/orcamentos/novo/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/orcamentos/novo/page",pathname:"/orcamentos/novo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8995:(e,t,s)=>{Promise.resolve().then(s.bind(s,6500))},6557:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(7577),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,...u},m)=>(0,a.createElement)("svg",{ref:m,...r,width:n,height:n,stroke:s,strokeWidth:o?24*Number(i)/Number(n):i,className:["lucide",`lucide-${l(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s}},3085:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]])},1890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},3547:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},5094:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6500:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(326),r=s(7577),l=s(434),n=s(6499),i=s(1890),o=s(1215),d=s(3085),c=s(3547),u=s(5094),m=s(3855),x=s(4019),p=s(3863);function h(){let[e,t]=(0,r.useState)([]),[s,h]=(0,r.useState)([]),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[j,N]=(0,r.useState)("casa"),[f,w]=(0,r.useState)(0),[k,S]=(0,r.useState)("avulso"),[C,_]=(0,r.useState)(""),[A,M]=(0,r.useState)(0),[T,q]=(0,r.useState)(0),[E,Z]=(0,r.useState)(""),[P,O]=(0,r.useState)([]),[R,L]=(0,r.useState)(""),z=(0,r.useRef)(null),[U,$]=(0,r.useState)(!1),[D,I]=(0,r.useState)(""),[V,H]=(0,r.useState)(""),[B,F]=(0,r.useState)(""),[G,Q]=(0,r.useState)(""),[W,X]=(0,r.useState)([]),[J,K]=(0,r.useState)(""),[Y,ee]=(0,r.useState)([]),[et,es]=(0,r.useState)(""),ea=(0,r.useMemo)(()=>P.reduce((e,t)=>e+Number(t.unit_price||0)*Number(t.quantity||0),0),[P]),er=(0,r.useMemo)(()=>{let e=Math.max(0,Math.min(Number(A||0),ea));return ea-e+Math.max(0,Number(T||0))},[ea,A,T]),el=(0,r.useMemo)(()=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),[]),en=(0,r.useMemo)(()=>!!(g&&v&&j&&f>0&&k),[g,v,j,f,k]),ei=e=>{O(P.filter((t,s)=>s!==e))},eo=e=>{document.execCommand(e),L(z.current?.innerHTML||"")},ed=()=>{let t=e.find(e=>e.id===g),a=s.find(e=>e.id===v);return`
      <p><strong>Or\xe7amento de Servi\xe7o</strong></p>
      <p>Cliente: ${t?.name||""}</p>
      <p>Servi\xe7o: ${a?.name||""}</p>
      <p>Resid\xeancia: ${j.toUpperCase()} — \xc1rea: ${f} m\xb2</p>
      <p>Modalidade: ${k.toUpperCase()}</p>
      <p>Validade: ${C?new Date(C).toLocaleDateString("pt-BR"):"—"}</p>
      <p>Itens e valores conforme tabela.</p>
    `},ec=async()=>{if(!g){alert("Selecione um cliente");return}if(!v){alert("Selecione um servi\xe7o");return}if(!(f>0)){alert("Informe a \xe1rea em m\xb2");return}$(!0);try{let e={title:D||"Or\xe7amento",customer_id:g,service_id:v,residence_type:j,area_m2:Number(f||0),service_modality:k,valid_until:C||null,discount:Number(A||0),taxes:Number(T||0),subtotal:Number(ea||0),total:Number(er||0),status:"rascunho",notes:E||null,rich_content:{html:R||ed()},initial_report:G||null,activities:W.length?W:null,payment_methods:Y.length?Y:null,contract_terms:et||null,client_label:V||null,client_subtitle:B||null},t=await (0,n.Ol)(e);for(let e of P)await (0,n.h4)({quote_id:t.id,description:e.description,quantity:Number(e.quantity||0),unit:e.unit||"un",unit_price:Number(e.unit_price||0),total:Number(e.unit_price||0)*Number(e.quantity||0)});alert("Or\xe7amento criado com sucesso!"),window.location.href=`/orcamentos/${t.id}`}catch(e){console.error("Erro ao salvar or\xe7amento:",e),alert("Erro ao salvar or\xe7amento")}finally{$(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(l.default,{href:"/orcamentos",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[a.jsx(i.Z,{className:"w-4 h-4"}),"Voltar"]})}),(0,a.jsxs)("button",{onClick:ec,disabled:U||!en,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-60",children:[a.jsx(o.Z,{className:"w-4 h-4"}),"Salvar Or\xe7amento"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"T\xedtulo do servi\xe7o"}),a.jsx("input",{value:D,onChange:e=>I(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",placeholder:"Ex.: Limpeza p\xf3s obra"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),(0,a.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Selecione..."}),e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"R\xf3tulo do cliente"}),a.jsx("input",{value:V,onChange:e=>H(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",placeholder:"Ex.: Arquiteta Fl\xe1via"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subt\xedtulo"}),a.jsx("input",{value:B,onChange:e=>F(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",placeholder:"Ex.: Condom\xednio ..."})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Servi\xe7o"}),(0,a.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Selecione..."}),s.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de resid\xeancia"}),(0,a.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"casa",children:"Casa"}),a.jsx("option",{value:"apartamento",children:"Apartamento"}),a.jsx("option",{value:"comercial",children:"Comercial"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"\xc1rea (m\xb2)"}),a.jsx("input",{type:"number",value:f,onChange:e=>w(Number(e.target.value)),className:"mt-1 w-full border rounded-lg px-3 py-2"}),!f&&a.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Informe a \xe1rea em m\xb2"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modalidade"}),(0,a.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"avulso",children:"Avulso"}),a.jsx("option",{value:"mensal",children:"Mensal"}),a.jsx("option",{value:"semanal",children:"Semanal"}),a.jsx("option",{value:"quinzenal",children:"Quinzenal"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Validade"}),a.jsx("input",{type:"date",value:C,onChange:e=>_(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Relat\xf3rio Inicial"}),a.jsx("textarea",{value:G,onChange:e=>Q(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",rows:5,placeholder:"Descreva o contexto do servi\xe7o..."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>eo("bold"),className:"px-2 py-1 border rounded",children:a.jsx(d.Z,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>eo("italic"),className:"px-2 py-1 border rounded",children:a.jsx(c.Z,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>eo("underline"),className:"px-2 py-1 border rounded",children:a.jsx(u.Z,{className:"w-4 h-4"})})]}),a.jsx("div",{ref:z,contentEditable:!0,onInput:()=>{L(z.current?.innerHTML||"")},className:"min-h-[160px] border rounded-lg p-3 focus:outline-none",dangerouslySetInnerHTML:{__html:R||ed()}}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observa\xe7\xf5es"}),a.jsx("textarea",{value:E,onChange:e=>Z(e.target.value),className:"mt-1 w-full border rounded-lg px-3 py-2",rows:3})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b flex justify-between items-center",children:a.jsx("span",{className:"font-medium",children:"Descri\xe7\xe3o das atividades"})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{value:J,onChange:e=>K(e.target.value),className:"flex-1 border rounded px-2 py-2",placeholder:"Ex.: Limpeza total do apartamento"}),a.jsx("button",{onClick:()=>{J.trim()&&(X([...W,J.trim()]),K(""))},className:"bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded",children:"Adicionar"})]}),a.jsx("ul",{className:"list-disc pl-6 space-y-1",children:W.map((e,t)=>(0,a.jsxs)("li",{className:"flex justify-between items-center",children:[a.jsx("span",{children:e}),a.jsx("button",{onClick:()=>X(W.filter((e,s)=>s!==t)),className:"text-red-600 text-sm",children:"Remover"})]},t))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:"Itens do or\xe7amento"}),(0,a.jsxs)("button",{onClick:()=>{O([...P,{description:"",quantity:1,unit:"un",unit_price:0}])},className:"bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-4 h-4"}),"Adicionar item"]})]}),a.jsx("div",{className:"p-4 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Descri\xe7\xe3o"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Qtd"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unidade"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor unit\xe1rio"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"A\xe7\xf5es"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map((e,t)=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{value:e.description,onChange:e=>{let s=e.target.value,a=[...P];a[t].description=s,O(a)},className:"w-full border rounded px-2 py-1"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"number",value:e.quantity,onChange:e=>{let s=Number(e.target.value),a=[...P];a[t].quantity=s,O(a)},className:"w-full border rounded px-2 py-1"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{value:e.unit,onChange:e=>{let s=e.target.value,a=[...P];a[t].unit=s,O(a)},className:"w-full border rounded px-2 py-1"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"number",value:e.unit_price,onChange:e=>{let s=Number(e.target.value),a=[...P];a[t].unit_price=s,O(a)},className:"w-full border rounded px-2 py-1"})}),(0,a.jsxs)("td",{className:"px-3 py-2 text-sm",children:["R$ ",(Number(e.unit_price||0)*Number(e.quantity||0)).toFixed(2)]}),a.jsx("td",{className:"px-3 py-2",children:(0,a.jsxs)("button",{onClick:()=>ei(t),className:"text-red-600 hover:text-red-800 flex items-center gap-1",children:[a.jsx(x.Z,{className:"w-4 h-4"})," Remover"]})})]},t))})]})}),(0,a.jsxs)("div",{className:"p-4 border-t grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Desconto"}),a.jsx("input",{type:"number",value:A,onChange:e=>M(Number(e.target.value)),className:"mt-1 w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Taxas"}),a.jsx("input",{type:"number",value:T,onChange:e=>q(Number(e.target.value)),className:"mt-1 w-full border rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm",children:["Subtotal: ",a.jsx("strong",{children:el.format(ea)})]}),(0,a.jsxs)("div",{className:"text-sm",children:["Desconto: ",a.jsx("strong",{children:el.format(Math.max(0,Math.min(Number(A||0),ea)))})]}),(0,a.jsxs)("div",{className:"text-sm",children:["Taxas: ",a.jsx("strong",{children:el.format(Math.max(0,Number(T||0)))})]}),(0,a.jsxs)("div",{className:"text-lg",children:["Total: ",a.jsx("strong",{children:el.format(er)})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("span",{className:"font-medium",children:"M\xe9todos de pagamento"})}),a.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 gap-2",children:["pix","transferencia","cartao","dinheiro"].map(e=>(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:Y.includes(e),onChange:t=>ee(s=>t.target.checked?[...s,e]:s.filter(t=>t!==e))}),a.jsx("span",{className:"capitalize",children:e})]},e))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("span",{className:"font-medium",children:"Condi\xe7\xf5es de contrato"})}),a.jsx("div",{className:"p-4",children:a.jsx("textarea",{value:et,onChange:e=>es(e.target.value),className:"w-full border rounded px-3 py-2",rows:4,placeholder:"Ex.: Or\xe7amento inclui materiais e equipamentos; 30% de entrada..."})})]}),a.jsx(p.Z,{context:{titulo:D,cliente:e.find(e=>e.id===g)||void 0,servico:s.find(e=>e.id===v)||void 0,residencia:j,area_m2:f,modalidade:k,valid_until:C||null,itens:P.map(e=>({description:e.description,quantity:e.quantity,unit:e.unit,unit_price:e.unit_price})),subtotal:ea,total:er},onSetValidUntil:e=>_(e),onAddItem:e=>O(t=>[...t,{description:e.description,quantity:e.quantity,unit:e.unit||"un",unit_price:e.unit_price}]),onSetTemplateAppend:e=>L(t=>(t||ed())+e),onSetActivities:e=>X(e),onSetContractTerms:e=>es(e),onSetPaymentMethods:e=>ee(e)})]})}},3863:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(326),r=s(7577);function l(e){let[t,s]=(0,r.useState)(!1),[l,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),u=async()=>{if(!l.trim())return;let t=[...d,{role:"user",content:l}];c(t),o(!0);try{let s=await fetch("/api/chatbot/budget",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:l}],context:e.context})}),a=await s.json(),r=String(a?.reply||"Sem resposta no momento.");c([...t,{role:"assistant",content:r,actions:a?.actions}])}catch{c([...t,{role:"assistant",content:"Falha ao responder. Tente novamente."}])}finally{o(!1),n("")}},m=t=>{if(t){if(t.setValidUntil&&e.onSetValidUntil&&e.onSetValidUntil(t.setValidUntil),Array.isArray(t.addItems)&&e.onAddItem)for(let s of t.addItems)e.onAddItem(s);t.setTemplateAppend&&e.onSetTemplateAppend&&e.onSetTemplateAppend(t.setTemplateAppend),Array.isArray(t.setActivities)&&e.onSetActivities&&e.onSetActivities(t.setActivities),"string"==typeof t.setContractTerms&&e.onSetContractTerms&&e.onSetContractTerms(t.setContractTerms),Array.isArray(t.setPaymentMethods)&&e.onSetPaymentMethods&&e.onSetPaymentMethods(t.setPaymentMethods)}};return a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t?(0,a.jsxs)("div",{className:"w-[320px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Assistente de Or\xe7amento"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-500",children:"✕"})]}),(0,a.jsxs)("div",{className:"h-64 overflow-y-auto px-3 py-2 space-y-2",children:[d.map((e,t)=>(0,a.jsxs)("div",{className:"user"===e.role?"text-right":"text-left",children:[a.jsx("div",{className:`inline-block px-3 py-2 rounded ${"user"===e.role?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 dark:text-gray-100"}`,children:e.content}),"assistant"===e.role&&e.actions&&a.jsx("div",{className:"mt-2",children:a.jsx("button",{onClick:()=>m(e.actions),className:"text-sm bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-100 px-2 py-1 rounded",children:"Aplicar sugest\xe3o"})})]},t)),0===d.length&&a.jsx("div",{className:"text-sm text-gray-500",children:"Fa\xe7a perguntas como “sugira itens”, “defina validade”, “preencha texto do template”."})]}),a.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{value:l,onChange:e=>n(e.target.value),placeholder:"Digite sua pergunta",className:"flex-1 border rounded px-2 py-2"}),a.jsx("button",{onClick:u,disabled:i,className:"bg-blue-600 text-white px-3 py-2 rounded",children:i?"...":"Enviar"})]})})]}):a.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow",children:"Ajuda"})})}},2365:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=s(8570);let r=(0,a.createProxy)(String.raw`C:\Users\Enzo Marcelo\Desktop\testes SOLO TRAE\crm casa limpa\src\app\orcamentos\novo\page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`C:\Users\Enzo Marcelo\Desktop\testes SOLO TRAE\crm casa limpa\src\app\orcamentos\novo\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,275,62],()=>s(7704));module.exports=a})();