"use strict";(()=>{var e={};e.id=6296,e.ids=[6296],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3223:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>w,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{DELETE:()=>d,PUT:()=>c});var a=t(9303),s=t(8716),i=t(670),n=t(7070),l=t(748);async function c(e,{params:r}){let{supabase:t,user:o}=await (0,l.n)(e);if(!o)return n.NextResponse.json({error:"N\xe3o autenticado"},{status:401});try{let{paid:o}=await e.json(),{data:a,error:s}=await t.from("employee_work_records").update({paid:o}).eq("id",r.id).select("*").single();if(s)throw s;if(o&&a){let e=null;if(a.employeeId){let{data:r}=await t.from("employees").select("name").eq("id",a.employeeId).single();e=r?.name||null}await t.from("cashflow_transactions").insert({type:"expense",category:"wages",amount:a.totalAmount||0,transaction_date:(a.workDate||new Date().toISOString()).slice(0,10),description:e?`Pagamento de di\xe1ria: ${e}`:"Pagamento de di\xe1ria"})}return n.NextResponse.json(a)}catch(e){return console.error("Erro ao atualizar registro de trabalho:",e),n.NextResponse.json({error:"Erro ao atualizar registro de trabalho"},{status:500})}}async function d(e,{params:r}){let{supabase:t,user:o}=await (0,l.n)(e);if(!o)return n.NextResponse.json({error:"N\xe3o autenticado"},{status:401});let{error:a}=await t.from("employee_work_records").delete().eq("id",r.id);return a?(console.error("Erro ao excluir registro de trabalho:",a),n.NextResponse.json({error:"Erro ao excluir registro de trabalho"},{status:500})):n.NextResponse.json({message:"Registro exclu\xeddo com sucesso"})}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/employees/work-records/[id]/route",pathname:"/api/employees/work-records/[id]",filename:"route",bundlePath:"app/api/employees/work-records/[id]/route"},resolvedPagePath:"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\api\\employees\\work-records\\[id]\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:u,staticGenerationAsyncStorage:m,serverHooks:g}=p,w="/api/employees/work-records/[id]/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},748:(e,r,t)=>{t.d(r,{n:()=>a});var o=t(2305);async function a(e){let r=(0,o.createServerClient)("https://hyygforlvwbbdzpctnid.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5eWdmb3JsdndiYmR6cGN0bmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNjY1NjksImV4cCI6MjA3ODg0MjU2OX0.1ih4fZRYRzg1oqZxAYonDPi5wO2-DHvb7anjcSPWeqs",{cookies:{getAll:()=>e.cookies.getAll(),setAll(r){r.forEach(({name:r,value:t})=>e.cookies.set(r,t))}}}),{data:{user:t}}=await r.auth.getUser();return{supabase:r,user:t}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972,2305],()=>t(3223));module.exports=o})();