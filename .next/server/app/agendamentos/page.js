(()=>{var e={};e.id=539,e.ids=[539],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(5664),r(564),r(7629),r(5866);var a=r(3191),s=r(8716),n=r(7922),d=r.n(n),l=r(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let o=["",{children:["agendamentos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5664)),"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\agendamentos\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,564)),"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Enzo Marcelo\\Desktop\\testes SOLO TRAE\\crm casa limpa\\src\\app\\agendamentos\\page.tsx"],m="/agendamentos/page",g={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/agendamentos/page",pathname:"/agendamentos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9661:(e,t,r)=>{Promise.resolve().then(r.bind(r,9953))},6557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r(7577),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),d=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:d=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...m},g)=>(0,a.createElement)("svg",{ref:g,...s,width:d,height:d,stroke:r,strokeWidth:i?24*Number(l)/Number(d):l,className:["lucide",`lucide-${n(e)}`,o].join(" "),...m},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},7358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1890:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2887:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},8091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9953:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(326),s=r(7577),n=r(6499),d=r(2777),l=r(1890),i=r(6557);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var c=r(4019);function m(){let[e,t]=(0,s.useState)([]),[r,i]=(0,s.useState)(new Date),[m,g]=(0,s.useState)(!0),[x,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[f,k]=(0,s.useState)([]),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)([]),[S,_]=(0,s.useState)([]),[C,M]=(0,s.useState)(""),[$,D]=(0,s.useState)(""),[E,A]=(0,s.useState)(""),[Z,O]=(0,s.useState)(0),[P,I]=(0,s.useState)(""),[L,q]=(0,s.useState)(!1),[T,F]=(0,s.useState)({}),[U,z]=(0,s.useState)(null),[R,Y]=(0,s.useState)(""),[H,B]=(0,s.useState)({}),[J,G]=(0,s.useState)({}),V=async()=>{try{let e=await (0,n.fg)(),a=new Date(r.getFullYear(),r.getMonth(),1),s=new Date(r.getFullYear(),r.getMonth()+1,0),d=(e||[]).filter(e=>{let t=new Date(e.appointment_date),r=new Date(`${t.toISOString().slice(0,10)}T00:00:00Z`);return r>=new Date(a.toISOString().slice(0,10))&&r<=new Date(s.toISOString().slice(0,10))});t(d);let l=Array.from(new Set(d.map(e=>e.series_id).filter(Boolean)));F({});let i=["bg-indigo-300","bg-purple-300","bg-pink-300","bg-teal-300","bg-blue-300","bg-orange-300","bg-lime-300","bg-rose-300"],o={},c=Array.from(new Set(e.map(e=>e.customer_id))),m={};c.forEach((e,t)=>{m[e]=i[t%i.length]}),l.forEach(e=>{o[e]={start:0,end:0,color:i[0]}}),e.forEach(e=>{if(!e.series_id)return;let t=Number(e.appointment_date.split("-")[2]),r=o[e.series_id]||{start:t,end:t,color:m[e.customer_id]||i[0]};r.start=0===r.start?t:Math.min(r.start,t),r.end=Math.max(r.end,t),r.color=m[e.customer_id]||r.color,o[e.series_id]=r}),B(o);let g={};e.forEach(e=>{e.series_id&&!g[e.series_id]&&(g[e.series_id]=e.customers.name||e.services.name)}),G(g)}finally{g(!1)}},Q=t=>{let a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`;return e.filter(e=>e.appointment_date===a)},W=e=>({scheduled:"bg-yellow-200 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",confirmed:"bg-blue-200 text-blue-800 dark:bg-blue-900 dark:text-blue-100","in-progress":"bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-100",in_progress:"bg-orange-200 text-orange-800 dark:bg-orange-900 dark:text-orange-100",completed:"bg-green-200 text-green-800 dark:bg-green-900 dark:text-green-100",cancelled:"bg-red-200 text-red-800 dark:bg-red-900 dark:text-red-100"})[e]||"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-100",X=e=>{let t=new Date(r.getFullYear(),r.getMonth(),e),a=new Date;return a.setHours(0,0,0,0),t<a},K=e=>{let t=Q(e).length;return X(e)?{label:"Indispon\xedvel",cls:"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200"}:0===t?{label:"Dispon\xedvel",cls:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100"}:{label:"Agendado",cls:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100"}},ee=e=>{let t=Q(e).length;return X(e)?"border-gray-300 opacity-70":0===t?"border-green-300":"border-yellow-300"},et=e=>Array.from(new Set(Q(e).map(e=>e.series_id).filter(Boolean))).map(e=>({id:e,range:H[e],label:J[e]})).filter(e=>e.range),er=e=>{X(e)||(u(e),p(!0))},ea=()=>{p(!1),u(null)},es=e=>{X(e)||k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e].sort((e,t)=>e-t))},en=()=>{j(!1),M(""),D(""),A(""),O(0),I("")},ed=e=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`,el=async e=>{if(e.preventDefault(),!E||0===f.length)return alert("Preencha os campos e selecione dias");q(!0);let t=U?.seriesId||("undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random()}`),r=ed(Math.min(...f)),a=R||ed(Math.max(...f));if(!U?.seriesId){if(!C||!$)return q(!1),alert("Selecione cliente e servi\xe7o");if(!d.O)return q(!1),alert("Supabase n\xe3o configurado");let{error:e}=await d.O.from("appointment_series").insert({id:t,customer_id:C,service_id:$,start_date:r,estimated_end_date:a,status:"in_progress",notes:P||null});if(e)return q(!1),alert("Erro ao criar s\xe9rie")}for(let e of f)try{await (0,n.Pc)({customer_id:U?.customerId||C,service_id:U?.serviceId||$,appointment_date:ed(e),appointment_time:U?.time||E,status:"scheduled",price:U?.price??Z,notes:U?.notes??(P||null)})}catch(e){return q(!1),alert("Erro ao salvar agendamento")}q(!1),alert("Agendamentos criados com sucesso"),k([]),j(!1),z(null),Y(""),V()};return m?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>{i(new Date(r.getFullYear(),r.getMonth()-1,1))},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:a.jsx(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][r.getMonth()]," ",r.getFullYear()]}),a.jsx("button",{onClick:()=>{i(new Date(r.getFullYear(),r.getMonth()+1,1))},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:a.jsx(o,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"p-3 flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Legenda:"}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",children:"Dispon\xedvel"}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",children:"Agendado"}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200",children:"Indispon\xedvel"}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{b(e=>!e),k([])},className:`px-3 py-1.5 rounded border text-sm ${y?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"}`,children:y?"Selecionando dias":"Selecionar dias"}),a.jsx("button",{onClick:()=>k([]),className:"px-3 py-1.5 rounded border text-sm bg-white text-gray-700 border-gray-300",children:"Limpar sele\xe7\xe3o"}),a.jsx("button",{onClick:()=>{0!==f.length&&j(!0)},disabled:!y||0===f.length,className:`px-3 py-1.5 rounded border text-sm ${f.length>0&&y?"bg-green-600 text-white border-green-600":"bg-white text-gray-400 border-gray-200"}`,children:"Agendar selecionados"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700",children:[["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"].map(e=>a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:e},e)),(()=>{let e=r.getFullYear(),t=r.getMonth(),a=new Date(e,t,1),s=new Date(e,t+1,0).getDate(),n=a.getDay(),d=[];for(let e=0;e<n;e++)d.push(null);for(let e=1;e<=s;e++)d.push(e);return d})().map((e,t)=>{let r=e?Q(e):[];return a.jsx("div",{className:`relative bg-white dark:bg-gray-800 p-2 min-h-24 border ${e?`${ee(e)} hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer`:"border-gray-100 dark:border-gray-700"}`,onClick:()=>{e&&(y?es(e):er(e))},children:e&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:e}),a.jsx("div",{className:"absolute top-2 right-2",children:(()=>{let t=K(e);return a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.cls}`,children:t.label})})()}),(0,a.jsxs)("div",{className:`space-y-1 ${f.includes(e)?"ring-2 ring-blue-400 rounded p-1":""}`,children:[et(e).slice(0,2).map((t,r)=>a.jsx("div",{className:`h-4 ${t.range.color} flex items-center px-1 text-[10px] text-gray-900 dark:text-gray-100 ${e===t.range.start?"rounded-l-full":""} ${e===t.range.end?"rounded-r-full":""}`,children:a.jsx("span",{className:"truncate",children:t.label})},`${t.id}-${r}`)),r.slice(0,2).map(e=>(0,a.jsxs)("div",{className:`text-xs px-1 py-0.5 rounded ${W(e.status)}`,children:[a.jsx("div",{className:"font-medium truncate",children:e.customers.name}),a.jsx("div",{className:"truncate",children:e.appointment_time})]},e.id)),r.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["+",r.length-2," mais"]})]})]})},t)})]}),h&&null!==x&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:ea}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-2xl mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:`Detalhes do dia ${String(x).padStart(2,"0")}/${String(r.getMonth()+1).padStart(2,"0")}/${r.getFullYear()}`}),a.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",onClick:ea,children:a.jsx(c.Z,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:(()=>{let e=Q(x);return 0===e.length?a.jsx("div",{className:"text-gray-700 dark:text-gray-200",children:"Nenhum agendamento â€” Dispon\xedvel"}):a.jsx("ul",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("li",{className:"border border-gray-200 dark:border-gray-700 rounded p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:e.customers.name}),a.jsx("span",{className:`text-[11px] px-2 py-0.5 rounded ${W(e.status)}`,children:e.status})]}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-700 dark:text-gray-200",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Hora:"})," ",e.appointment_time]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Servi\xe7o:"})," ",e.services.name]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Dura\xe7\xe3o:"})," ",e.services.duration_minutes," min"]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Pre\xe7o:"})," R$ ",e.price.toFixed(2)]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Telefone:"})," ",e.customers.phone]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",e.customers.email]})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:"Observa\xe7\xf5es:"})," ",e.notes]}),e.series_id&&T[e.series_id]&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-200",children:[a.jsx("span",{className:"font-medium",children:"Est. t\xe9rmino:"})," ",new Date(T[e.series_id].estimated_end_date||e.appointment_date).toLocaleDateString("pt-BR")]}),a.jsx("div",{className:"mt-3 flex items-center gap-2",children:a.jsx("button",{className:"px-3 py-1.5 rounded border text-sm bg-white text-gray-700 border-gray-300",onClick:async()=>{let t=e.series_id;if(!t){if(t="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random()}`,!d.O){alert("Supabase n\xe3o configurado");return}await d.O.from("appointment_series").insert({id:t,customer_id:e.customer_id,service_id:e.service_id,start_date:e.appointment_date,status:"in_progress",notes:e.notes}),await d.O.from("appointments").update({series_id:t}).eq("id",e.id)}z({seriesId:t||void 0,customerId:e.customer_id,serviceId:e.service_id,time:e.appointment_time,price:e.price,notes:e.notes}),b(!0),p(!1)},children:"Adicionar dias \xe0 obra"})})]},e.id))})})()})]})]}),v&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:en}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-xl mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Agendar ",f.length," dia(s)"]}),a.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",onClick:en,children:a.jsx(c.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("form",{onSubmit:el,className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Cliente"}),(0,a.jsxs)("select",{value:C,onChange:e=>M(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Selecione um cliente"}),w.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Servi\xe7o"}),(0,a.jsxs)("select",{value:$,onChange:e=>D(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Selecione um servi\xe7o"}),S.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Hora"}),a.jsx("input",{type:"time",value:E,onChange:e=>A(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Pre\xe7o"}),a.jsx("input",{type:"number",step:"0.01",value:Z,onChange:e=>O(Number(e.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Observa\xe7\xf5es"}),a.jsx("textarea",{value:P,onChange:e=>I(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Estimativa de t\xe9rmino"}),a.jsx("input",{type:"date",value:R,onChange:e=>Y(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"submit",disabled:L,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white ${L?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:L?"Salvando...":"Salvar agendamentos"}),a.jsx("button",{type:"button",onClick:en,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancelar"})]})]})]})]})]})}var g=r(7358);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,i.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var u=r(3855);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,i.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),p=(0,i.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var y=r(2887),b=r(9508),f=r(8091),k=r(434);function v(){let[e,t]=(0,s.useState)("calendar"),[r,d]=(0,s.useState)([]),[l,i]=(0,s.useState)(!0),o=async e=>{if(confirm("Tem certeza que deseja excluir este agendamento?"))try{await (0,n.V2)(e),d(r.filter(t=>t.id!==e)),alert("Agendamento exclu\xeddo com sucesso!")}catch(e){console.error("Erro ao excluir agendamento:",e),alert("Erro ao excluir agendamento")}},c=async e=>{try{let t=await fetch(`/api/jobs/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})});if(!t.ok)throw Error("Falha ao atualizar status");await t.json(),d(t=>t.map(t=>t.id===e?{...t,status:"completed"}:t)),alert("Agendamento marcado como conclu\xeddo")}catch(e){alert("Erro ao marcar como conclu\xeddo")}},v=async e=>{try{let t=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appointmentId:e.id,subtotal:e.price,tax:0})});if(!t.ok)throw Error("Falha ao criar invoice");await t.json(),alert("Invoice criada com sucesso")}catch(e){alert("Erro ao criar invoice")}},j=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"confirmed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"in_progress":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";case"completed":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100"}},w=e=>{switch(e){case"scheduled":return"Agendado";case"confirmed":return"Confirmado";case"in_progress":return"Em Andamento";case"completed":return"Conclu\xeddo";case"cancelled":return"Cancelado";default:return e}};return l&&"list"===e?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Agendamentos"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[(0,a.jsxs)("button",{onClick:()=>t("calendar"),className:`px-3 py-1 rounded-md text-sm font-medium ${"calendar"===e?"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[a.jsx(g.Z,{className:"h-4 w-4 inline mr-1"}),"Calend\xe1rio"]}),(0,a.jsxs)("button",{onClick:()=>t("list"),className:`px-3 py-1 rounded-md text-sm font-medium ${"list"===e?"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[a.jsx(x,{className:"h-4 w-4 inline mr-1"}),"Lista"]})]}),(0,a.jsxs)(k.default,{href:"/agendamentos/novo",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(u.Z,{className:"h-4 w-4 mr-1"}),"Novo Agendamento"]})]})]}),"calendar"===e?a.jsx(m,{}):a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg",children:(0,a.jsxs)("div",{className:"flow-root",children:[a.jsx("ul",{className:"-my-5 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(e=>a.jsx("li",{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 px-6",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.customers.name}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(e.status)}`,children:w(e.status)})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(g.Z,{className:"flex-shrink-0 mr-1 h-4 w-4 text-gray-400 dark:text-gray-500"}),new Date(e.appointment_date).toLocaleDateString("pt-BR")]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(h,{className:"flex-shrink-0 mr-1 h-4 w-4 text-gray-400 dark:text-gray-500"}),e.appointment_time]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(p,{className:"flex-shrink-0 mr-1 h-4 w-4 text-gray-400 dark:text-gray-500"}),e.services.name]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(y.Z,{className:"flex-shrink-0 mr-1 h-4 w-4 text-gray-400 dark:text-gray-500"}),e.customers.phone]})]}),e.notes&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:e.notes})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(k.default,{href:`/agendamentos/${e.id}/editar`,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 dark:border-gray-700 shadow-sm text-xs font-medium rounded text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800",children:[a.jsx(b.Z,{className:"h-3 w-3 mr-1"}),"Editar"]}),"completed"!==e.status&&a.jsx("button",{onClick:()=>c(e.id),className:"inline-flex items-center px-2.5 py-1.5 border border-green-300 dark:border-green-700 shadow-sm text-xs font-medium rounded text-green-700 dark:text-green-300 bg-white dark:bg-gray-900 hover:bg-green-50 dark:hover:bg-gray-800",children:"Marcar como feito"}),"completed"===e.status&&a.jsx("button",{onClick:()=>v(e),className:"inline-flex items-center px-2.5 py-1.5 border border-blue-300 dark:border-blue-700 shadow-sm text-xs font-medium rounded text-blue-700 dark:text-blue-300 bg-white dark:bg-gray-900 hover:bg-blue-50 dark:hover:bg-gray-800",children:"Criar Invoice"}),(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 dark:border-red-700 shadow-sm text-xs font-medium rounded text-red-700 dark:text-red-300 bg-white dark:bg-gray-900 hover:bg-red-50 dark:hover:bg-gray-800",children:[a.jsx(f.Z,{className:"h-3 w-3 mr-1"}),"Excluir"]})]})]})},e.id))}),0===r.length&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Nenhum agendamento encontrado"})]})})]})}},5664:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>d,__esModule:()=>n,default:()=>l});var a=r(8570);let s=(0,a.createProxy)(String.raw`C:\Users\Enzo Marcelo\Desktop\testes SOLO TRAE\crm casa limpa\src\app\agendamentos\page.tsx`),{__esModule:n,$$typeof:d}=s;s.default;let l=(0,a.createProxy)(String.raw`C:\Users\Enzo Marcelo\Desktop\testes SOLO TRAE\crm casa limpa\src\app\agendamentos\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,275,62],()=>r(5420));module.exports=a})();