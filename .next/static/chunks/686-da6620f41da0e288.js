"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{1066:function(t,e,r){r.d(e,{Z:function(){return a}});var n=r(2265),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(t,e)=>{let r=(0,n.forwardRef)((r,a)=>{let{color:u="currentColor",size:c=24,strokeWidth:s=2,absoluteStrokeWidth:f,className:l="",children:d,...m}=r;return(0,n.createElement)("svg",{ref:a,...o,width:c,height:c,stroke:u,strokeWidth:f?24*Number(s)/Number(c):s,className:["lucide","lucide-".concat(i(t)),l].join(" "),...m},[...e.map(t=>{let[e,r]=t;return(0,n.createElement)(e,r)}),...Array.isArray(d)?d:[d]])});return r.displayName="".concat(t),r}},4241:function(t,e,r){r.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1077:function(t,e,r){r.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},3225:function(t,e,r){r.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},1240:function(t,e,r){r.d(e,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8493:function(t,e,r){r.d(e,{$J:function(){return E},A9:function(){return x},BX:function(){return S},By:function(){return g},CF:function(){return w},FG:function(){return d},G6:function(){return s},HG:function(){return N},J5:function(){return j},KB:function(){return q},LA:function(){return i},OL:function(){return o},Ol:function(){return P},Ov:function(){return l},P6:function(){return C},Pc:function(){return O},Pg:function(){return f},QR:function(){return Z},Rt:function(){return D},Ts:function(){return h},U2:function(){return u},UO:function(){return M},V2:function(){return y},Z$:function(){return p},fN:function(){return _},fg:function(){return b},h4:function(){return A},hH:function(){return k},np:function(){return F},p9:function(){return m},r8:function(){return I},tI:function(){return v},tt:function(){return J},wK:function(){return a},wo:function(){return c},xd:function(){return R},yo:function(){return T}});var n=r(4316);async function o(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("customers").select("*").order("name");if(e)throw e;return t||[]}async function i(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{error:e}=await n.O.from("customers").delete().eq("id",t);if(e)throw e}async function a(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("customers").insert([t]).select("*").single();if(r)throw r;return e}async function u(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("services").select("*").order("name");if(e)throw e;return t||[]}async function c(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{error:e}=await n.O.from("services").delete().eq("id",t);if(e)throw e}async function s(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("services").insert([t]).select("*").single();if(r)throw r;return e}async function f(t,e){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:o}=await n.O.from("services").update(e).eq("id",t).select("*").single();if(o)throw o;return r}async function l(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").order("issue_date",{ascending:!1});if(e)throw e;return t||[]}async function d(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").eq("id",t).single();if(r)throw r;return e||null}async function m(t){if(!n.O)throw Error("Supabase n\xe3o configurado");if(!t||0===t.length)return[];let{data:e,error:r}=await n.O.from("invoices").select("appointment_id").in("appointment_id",t);if(r)throw r;return e||[]}async function p(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("invoices").insert([t]).select("*").single();if(r)throw r;return e}async function w(t,e){let r=await fetch("/api/invoices/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})});if(!r.ok){let t=await r.json().catch(()=>({}));throw Error((null==t?void 0:t.error)||"Falha ao atualizar fatura")}}async function h(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("appointments").select("*, customers (name, phone), services (name, duration_minutes)");if(e)throw e;return t||[]}async function y(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{error:e}=await n.O.from("appointments").delete().eq("id",t);if(e)throw e}async function g(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("appointments").select("*");if(e)throw e;return t||[]}async function O(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("appointments").insert([t]).select("*").single();if(r)throw r;return e}async function b(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("appointments").select("*, customers (name, phone, email), services (name, duration_minutes)");if(e)throw e;return t||[]}async function S(t){let e,r;if(!n.O)throw Error("Supabase n\xe3o configurado");if(t&&/^\d{4}-\d{2}$/.test(t)){let[n,o]=t.split("-").map(Number),i=new Date(Date.UTC(n,o-1,1)),a=new Date(Date.UTC(n,o,1));e=i.toISOString().slice(0,10),r=a.toISOString().slice(0,10)}let o=n.O.from("cashflow_transactions").select("id, type, category, amount, transaction_date, client_id");e&&r&&(o=o.gte("transaction_date",e).lt("transaction_date",r));let{data:i,error:a}=await o;if(a)throw a;let u=(i||[]).filter(t=>"income"===t.type).reduce((t,e)=>t+Number(e.amount||0),0),c=(i||[]).filter(t=>"expense"===t.type).reduce((t,e)=>t+Number(e.amount||0),0),s={};(i||[]).filter(t=>"expense"===t.type).forEach(t=>{let e=t.category||"outros";s[e]=(s[e]||0)+Number(t.amount||0)});let f=[],l=Array.from(new Set((i||[]).filter(t=>"income"===t.type&&t.client_id).map(t=>t.client_id)));if(l.length>0){let{data:t}=await n.O.from("customers").select("id, name").in("id",l),e={};(i||[]).filter(t=>"income"===t.type&&t.client_id).forEach(t=>{let r=t.client_id;e[r]=(e[r]||0)+Number(t.amount||0)}),(f=(t||[]).map(t=>({client_id:t.id,name:t.name,total:e[t.id]||0}))).sort((t,e)=>e.total-t.total)}return{month:t||null,summary:{income:u,expense:c,net:u-c},expenseByCategory:s,incomeByClient:f}}async function E(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let e={type:"expense",category:t.category||"other",amount:Number(t.amount||0),transaction_date:(t.date||new Date().toISOString()).slice(0,10),description:t.description||null};if(!e.amount||e.amount<=0)throw Error("Valor inv\xe1lido");let{data:r,error:o}=await n.O.from("cashflow_transactions").insert(e).select("*").single();if(o)throw o;return r}async function _(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("employees").select("*");if(e)throw e;return t||[]}async function k(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("employee_work_records").select("*").eq("employeeId",t);if(r)throw r;return e||[]}async function v(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t}=await n.O.from("company").select("*").single();return t||null}async function q(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("employees").select("*").eq("id",t).single();if(r)throw r;return e||null}async function I(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let e=(t.cpf||"").toString().replace(/\D/g,"");if(!e)throw Error("CPF inv\xe1lido");let{data:r}=await n.O.from("employees").select("id").eq("cpf",e).limit(1);if(r&&r.length>0)throw Error("CPF j\xe1 cadastrado");let{error:o}=await n.O.from("employees").insert([{...t,cpf:e}]);if(o)throw o}async function N(t,e){if(!n.O)throw Error("Supabase n\xe3o configurado");let r=(e.cpf||"").toString().replace(/\D/g,"");if(r){let{data:e}=await n.O.from("employees").select("id").eq("cpf",r).neq("id",t).limit(1);if(e&&e.length>0)throw Error("CPF j\xe1 cadastrado")}let{error:o}=await n.O.from("employees").update({...e,cpf:r||e.cpf}).eq("id",t);if(o)throw o}async function C(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{error:e}=await n.O.from("employees").delete().eq("id",t);if(e)throw e}async function j(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let e={employeeId:t.employeeId,workDate:t.workDate,workDays:t.workDays,dailyRate:t.dailyRate,totalAmount:Number(t.dailyRate||0)*Number(t.workDays||0),notes:t.notes||null,paid:!1},{error:r}=await n.O.from("employee_work_records").insert([e]);if(r)throw r}async function D(t,e){let r=await fetch("/api/employees/work-records/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paid:e})});if(!r.ok){let t=await r.json().catch(()=>({}));throw Error((null==t?void 0:t.error)||"Falha ao atualizar registro de trabalho")}}async function x(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let e={name:t.name,cnpj:t.cnpj,phone:t.phone,email:t.email,address:t.address,bank_info:t.bank_info,logo_url:t.logo_url,updated_at:new Date().toISOString()};if(t.id){let{data:r,error:o}=await n.O.from("company").update(e).eq("id",t.id).select("*").single();if(o)throw o;return r}{let{data:t,error:r}=await n.O.from("company").insert(e).select("*").single();if(r)throw r;return t}}async function Z(){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:e}=await n.O.from("quotes").select("*, customers (name, phone), services (name)");if(e){if("PGRST205"===e.code)return[];throw e}return(t||[]).sort((t,e)=>(e.created_at||"").localeCompare(t.created_at||""))}async function J(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("quotes").select("*, customers (*), services (*), quote_items (*), quote_images (*)").eq("id",t).single();if(r){if("PGRST205"===r.code)return null;throw r}return e||null}async function P(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("quotes").insert([t]).select("*").single();if(r)throw r;return e}async function R(t,e){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:o}=await n.O.from("quotes").update(e).eq("id",t).select("*").single();if(o)throw o;return r}async function M(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{error:e}=await n.O.from("quotes").delete().eq("id",t);if(e)throw e}async function A(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await n.O.from("quote_items").insert([t]).select("*").single();if(r)throw r;return e}async function T(t,e){if(!n.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:o}=await n.O.from("quote_items").update(e).eq("id",t).select("*").single();if(o)throw o;return r}async function F(t){if(!n.O)throw Error("Supabase n\xe3o configurado");let{error:e}=await n.O.from("quote_items").delete().eq("id",t);if(e)throw e}},4316:function(t,e,r){r.d(e,{O:function(){return a}});var n=r(4170);let o="https://hyygforlvwbbdzpctnid.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5eWdmb3JsdndiYmR6cGN0bmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNjY1NjksImV4cCI6MjA3ODg0MjU2OX0.1ih4fZRYRzg1oqZxAYonDPi5wO2-DHvb7anjcSPWeqs",a="string"==typeof o&&"string"==typeof i&&o.startsWith("https://")&&o.includes(".supabase.co")&&!o.includes("example.supabase.co")&&i.length>20?(0,n.createBrowserClient)(o,i):null}}]);