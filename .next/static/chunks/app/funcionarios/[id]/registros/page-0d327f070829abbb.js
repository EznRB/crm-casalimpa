(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{2130:function(e,t,r){Promise.resolve().then(r.bind(r,6946))},1066:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{color:s="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:f,...m}=r;return(0,a.createElement)("svg",{ref:i,...n,width:c,height:c,stroke:s,strokeWidth:d?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(o(e)),u].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(f)?f:[f]])});return r.displayName="".concat(e),r}},5137:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4241:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(1066).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2513:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(1066).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9061:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(1066).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6946:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),n=r(2265),o=r(6463),i=r(7138),s=r(5137),c=r(2513),l=r(9061),d=r(4241),u=r(1066);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,u.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),m=(0,u.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var h=r(8493);function g(){let e=(0,o.useParams)();(0,o.useRouter)();let t=e.id,[r,u]=(0,n.useState)(null),[g,p]=(0,n.useState)([]),[y,w]=(0,n.useState)(!0),[x,b]=(0,n.useState)(!1),[k,v]=(0,n.useState)({workDate:new Date().toISOString().split("T")[0],workDays:1,dailyRate:150,notes:""});(0,n.useEffect)(()=>{O()},[t]);let O=async()=>{try{let e=await (0,h.KB)(t);if(!e)throw Error("Funcion\xe1rio n\xe3o encontrado");u({id:e.id,name:e.name,dailyRate:e.dailyRate});let r=await (0,h.hH)(t);p((r||[]).sort((e,t)=>new Date(t.workDate).getTime()-new Date(e.workDate).getTime()))}finally{w(!1)}},j=async e=>{e.preventDefault();try{await (0,h.J5)({employeeId:t,workDate:k.workDate,workDays:k.workDays,dailyRate:k.dailyRate,notes:k.notes||null}),b(!1),v({workDate:new Date().toISOString().split("T")[0],workDays:1,dailyRate:(null==r?void 0:r.dailyRate)||150,notes:""}),O()}catch(e){console.error("Erro ao criar registro:",e),alert("Erro ao criar registro de trabalho")}},N=async(e,t)=>{try{await (0,h.Rt)(e,!t),O()}catch(e){alert("Erro ao atualizar status de pagamento")}};return y?(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"text-center",children:"Carregando..."})}):r?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(i.default,{href:"/funcionarios",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4 mr-1"}),"Voltar para Funcion\xe1rios"]})}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:r.name}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Registros de trabalho e pagamentos"})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",g.filter(e=>!e.paid).reduce((e,t)=>e+t.totalAmount,0).toFixed(2)]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total a Pagar"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:g.length}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total de Registros"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:g.filter(e=>!e.paid).length}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Registros Pendentes"})]})]})}),(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Registros de Trabalho"}),(0,a.jsxs)("button",{onClick:()=>b(!x),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Novo Registro"]})]}),x&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Adicionar Registro"}),(0,a.jsxs)("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data do Trabalho"}),(0,a.jsx)("input",{type:"date",value:k.workDate,onChange:e=>v(t=>({...t,workDate:e.target.value})),required:!0,className:"block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dias Trabalhados"}),(0,a.jsx)("input",{type:"number",min:"0.5",step:"0.5",value:k.workDays,onChange:e=>v(t=>({...t,workDays:parseFloat(e.target.value)})),required:!0,className:"block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor da Di\xe1ria (R$)"}),(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",value:(null==r?void 0:r.dailyRate)||150,readOnly:!0,required:!0,className:"block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-gray-100"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("button",{type:"submit",className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Salvar"]})}),(0,a.jsxs)("div",{className:"md:col-span-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observa\xe7\xf5es"}),(0,a.jsx)("textarea",{value:k.notes,onChange:e=>v(t=>({...t,notes:e.target.value})),rows:2,className:"block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-gray-100"})]})]})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md",children:0===g.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Nenhum registro de trabalho encontrado"}):(0,a.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:g.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("div",{className:"px-4 py-4 sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:new Date(e.workDate).toLocaleDateString("pt-BR")}),(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.paid?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"),children:e.paid?"Pago":"Pendente"})]}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-3 gap-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Dias Trabalhados:"})," ",e.workDays]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Di\xe1ria:"})," R$ ",e.dailyRate.toFixed(2)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Total:"})," R$ ",e.totalAmount.toFixed(2)]})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{className:"font-medium",children:"Observa\xe7\xf5es:"})," ",e.notes]})]}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)("button",{onClick:()=>N(e.id,e.paid),className:"inline-flex items-center px-3 py-2 border text-sm leading-4 font-medium rounded-md ".concat(e.paid?"border-yellow-300 text-yellow-700 bg-yellow-50 hover:bg-yellow-100 dark:border-yellow-600 dark:text-yellow-400 dark:bg-yellow-900 dark:hover:bg-yellow-800":"border-green-300 text-green-700 bg-green-50 hover:bg-green-100 dark:border-green-600 dark:text-green-400 dark:bg-green-900 dark:hover:bg-green-800"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),children:e.paid?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{className:"h-4 w-4 mr-1"}),"Marcar como Pendente"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-1"}),"Marcar como Pago"]})})})]})})},e.id))})})]}):(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"text-center text-red-600",children:"Funcion\xe1rio n\xe3o encontrado"})})}},8493:function(e,t,r){"use strict";r.d(t,{$J:function(){return v},A9:function(){return C},BX:function(){return k},By:function(){return w},CF:function(){return g},FG:function(){return f},G6:function(){return l},HG:function(){return _},J5:function(){return R},KB:function(){return S},LA:function(){return o},OL:function(){return n},Ol:function(){return Z},Ov:function(){return u},P6:function(){return D},Pc:function(){return x},Pg:function(){return d},QR:function(){return P},Rt:function(){return q},Ts:function(){return p},U2:function(){return s},UO:function(){return F},V2:function(){return y},Z$:function(){return h},fN:function(){return O},fg:function(){return b},h4:function(){return z},hH:function(){return j},np:function(){return M},p9:function(){return m},r8:function(){return E},tI:function(){return N},tt:function(){return I},wK:function(){return i},wo:function(){return c},xd:function(){return T},yo:function(){return A}});var a=r(4316);async function n(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("customers").select("*").order("name");if(t)throw t;return e||[]}async function o(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("customers").delete().eq("id",e);if(t)throw t}async function i(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("customers").insert([e]).select("*").single();if(r)throw r;return t}async function s(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("services").select("*").order("name");if(t)throw t;return e||[]}async function c(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("services").delete().eq("id",e);if(t)throw t}async function l(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("services").insert([e]).select("*").single();if(r)throw r;return t}async function d(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:n}=await a.O.from("services").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function u(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").order("issue_date",{ascending:!1});if(t)throw t;return e||[]}async function f(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").eq("id",e).single();if(r)throw r;return t||null}async function m(e){if(!a.O)throw Error("Supabase n\xe3o configurado");if(!e||0===e.length)return[];let{data:t,error:r}=await a.O.from("invoices").select("appointment_id").in("appointment_id",e);if(r)throw r;return t||[]}async function h(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("invoices").insert([e]).select("*").single();if(r)throw r;return t}async function g(e,t){let r=await fetch("/api/invoices/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha ao atualizar fatura")}}async function p(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("appointments").select("*, customers (name, phone), services (name, duration_minutes)");if(t)throw t;return e||[]}async function y(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("appointments").delete().eq("id",e);if(t)throw t}async function w(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("appointments").select("*");if(t)throw t;return e||[]}async function x(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("appointments").insert([e]).select("*").single();if(r)throw r;return t}async function b(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("appointments").select("*, customers (name, phone, email), services (name, duration_minutes)");if(t)throw t;return e||[]}async function k(e){let t,r;if(!a.O)throw Error("Supabase n\xe3o configurado");if(e&&/^\d{4}-\d{2}$/.test(e)){let[a,n]=e.split("-").map(Number),o=new Date(Date.UTC(a,n-1,1)),i=new Date(Date.UTC(a,n,1));t=o.toISOString().slice(0,10),r=i.toISOString().slice(0,10)}let n=a.O.from("cashflow_transactions").select("id, type, category, amount, transaction_date, client_id");t&&r&&(n=n.gte("transaction_date",t).lt("transaction_date",r));let{data:o,error:i}=await n;if(i)throw i;let s=(o||[]).filter(e=>"income"===e.type).reduce((e,t)=>e+Number(t.amount||0),0),c=(o||[]).filter(e=>"expense"===e.type).reduce((e,t)=>e+Number(t.amount||0),0),l={};(o||[]).filter(e=>"expense"===e.type).forEach(e=>{let t=e.category||"outros";l[t]=(l[t]||0)+Number(e.amount||0)});let d=[],u=Array.from(new Set((o||[]).filter(e=>"income"===e.type&&e.client_id).map(e=>e.client_id)));if(u.length>0){let{data:e}=await a.O.from("customers").select("id, name").in("id",u),t={};(o||[]).filter(e=>"income"===e.type&&e.client_id).forEach(e=>{let r=e.client_id;t[r]=(t[r]||0)+Number(e.amount||0)}),(d=(e||[]).map(e=>({client_id:e.id,name:e.name,total:t[e.id]||0}))).sort((e,t)=>t.total-e.total)}return{month:e||null,summary:{income:s,expense:c,net:s-c},expenseByCategory:l,incomeByClient:d}}async function v(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t={type:"expense",category:e.category||"other",amount:Number(e.amount||0),transaction_date:(e.date||new Date().toISOString()).slice(0,10),description:e.description||null};if(!t.amount||t.amount<=0)throw Error("Valor inv\xe1lido");let{data:r,error:n}=await a.O.from("cashflow_transactions").insert(t).select("*").single();if(n)throw n;return r}async function O(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("employees").select("*");if(t)throw t;return e||[]}async function j(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("employee_work_records").select("*").eq("employeeId",e);if(r)throw r;return t||[]}async function N(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e}=await a.O.from("company").select("*").single();return e||null}async function S(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("employees").select("*").eq("id",e).single();if(r)throw r;return t||null}async function E(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t=(e.cpf||"").toString().replace(/\D/g,"");if(!t)throw Error("CPF inv\xe1lido");let{data:r}=await a.O.from("employees").select("id").eq("cpf",t).limit(1);if(r&&r.length>0)throw Error("CPF j\xe1 cadastrado");let{error:n}=await a.O.from("employees").insert([{...e,cpf:t}]);if(n)throw n}async function _(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let r=(t.cpf||"").toString().replace(/\D/g,"");if(r){let{data:t}=await a.O.from("employees").select("id").eq("cpf",r).neq("id",e).limit(1);if(t&&t.length>0)throw Error("CPF j\xe1 cadastrado")}let{error:n}=await a.O.from("employees").update({...t,cpf:r||t.cpf}).eq("id",e);if(n)throw n}async function D(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("employees").delete().eq("id",e);if(t)throw t}async function R(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t={employeeId:e.employeeId,workDate:e.workDate,workDays:e.workDays,dailyRate:e.dailyRate,totalAmount:Number(e.dailyRate||0)*Number(e.workDays||0),notes:e.notes||null,paid:!1},{error:r}=await a.O.from("employee_work_records").insert([t]);if(r)throw r}async function q(e,t){let r=await fetch("/api/employees/work-records/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paid:t})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha ao atualizar registro de trabalho")}}async function C(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t={name:e.name,cnpj:e.cnpj,phone:e.phone,email:e.email,address:e.address,bank_info:e.bank_info,logo_url:e.logo_url,updated_at:new Date().toISOString()};if(e.id){let{data:r,error:n}=await a.O.from("company").update(t).eq("id",e.id).select("*").single();if(n)throw n;return r}{let{data:e,error:r}=await a.O.from("company").insert(t).select("*").single();if(r)throw r;return e}}async function P(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("quotes").select("*, customers (name, phone), services (name)");if(t){if("PGRST205"===t.code)return[];throw t}return(e||[]).sort((e,t)=>(t.created_at||"").localeCompare(e.created_at||""))}async function I(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("quotes").select("*, customers (*), services (*), quote_items (*), quote_images (*)").eq("id",e).single();if(r){if("PGRST205"===r.code)return null;throw r}return t||null}async function Z(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("quotes").insert([e]).select("*").single();if(r)throw r;return t}async function T(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:n}=await a.O.from("quotes").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function F(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("quotes").delete().eq("id",e);if(t)throw t}async function z(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("quote_items").insert([e]).select("*").single();if(r)throw r;return t}async function A(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:n}=await a.O.from("quote_items").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function M(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("quote_items").delete().eq("id",e);if(t)throw t}},4316:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var a=r(4170);let n="https://hyygforlvwbbdzpctnid.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5eWdmb3JsdndiYmR6cGN0bmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNjY1NjksImV4cCI6MjA3ODg0MjU2OX0.1ih4fZRYRzg1oqZxAYonDPi5wO2-DHvb7anjcSPWeqs",i="string"==typeof n&&"string"==typeof o&&n.startsWith("https://")&&n.includes(".supabase.co")&&!n.includes("example.supabase.co")&&o.length>20?(0,a.createBrowserClient)(n,o):null}},function(e){e.O(0,[46,170,138,971,23,744],function(){return e(e.s=2130)}),_N_E=e.O()}]);