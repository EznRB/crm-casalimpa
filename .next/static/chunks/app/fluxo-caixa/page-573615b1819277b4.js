(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{3707:function(e,a,s){Promise.resolve().then(s.bind(s,345))},345:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var t=s(7437),r=s(2265),d=s(8493),l=s(4241),i=s(1077),n=s(1066);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var o=s(3225);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,n.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var m=s(1240);function g(){let[e,a]=(0,r.useState)(new Date().toISOString().slice(0,7)),[s,n]=(0,r.useState)(null),[g,u]=(0,r.useState)(!1),[h,y]=(0,r.useState)({category:"products",amount:"",date:new Date().toISOString().slice(0,10),description:""}),[p,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j()},[e]);let j=async()=>{u(!0);try{let a=await (0,d.BX)(e);n(a)}finally{u(!1)}},v=async()=>{b(!0);try{await (0,d.$J)({category:h.category,amount:Number(h.amount),date:h.date,description:h.description}),await j(),y({category:"products",amount:"",date:new Date().toISOString().slice(0,10),description:""})}finally{b(!1)}},N=(0,r.useMemo)(()=>{let e=Object.entries((null==s?void 0:s.expenseByCategory)||{}),a=e.reduce((e,a)=>{let[,s]=a;return e+s},0);return e.map(e=>{let[s,t]=e;return{key:s,value:t,pct:a?t/a*100:0}})},[s]);return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Fluxo de Caixa"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Acompanhe receitas, despesas e resultado mensal"})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[(0,t.jsx)(l.Z,{className:"w-4 h-4"}),"M\xeas"]}),(0,t.jsx)("input",{type:"month",value:e,onChange:e=>a(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-900"})]}),g?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Registrar Despesa"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Categoria"}),(0,t.jsxs)("select",{value:h.category,onChange:e=>y({...h,category:e.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-900",children:[(0,t.jsx)("option",{value:"products",children:"Produtos"}),(0,t.jsx)("option",{value:"transport",children:"Transporte/Gasolina"}),(0,t.jsx)("option",{value:"wages",children:"Di\xe1ria de Funcion\xe1rios"}),(0,t.jsx)("option",{value:"other",children:"Outros"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Valor"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:h.amount,onChange:e=>y({...h,amount:e.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-900"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Data"}),(0,t.jsx)("input",{type:"date",value:h.date,onChange:e=>y({...h,date:e.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-900"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Descri\xe7\xe3o"}),(0,t.jsx)("input",{type:"text",value:h.description,onChange:e=>y({...h,description:e.target.value}),className:"mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-900"})]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("button",{onClick:v,disabled:p||!h.amount,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Salvando...":"Salvar Despesa"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i.Z,{className:"h-8 w-8 text-green-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Receitas"}),(0,t.jsxs)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:["R$ ",((null==s?void 0:s.summary.income)||0).toLocaleString("pt-BR")]})]})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c,{className:"h-8 w-8 text-red-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Despesas"}),(0,t.jsxs)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:["R$ ",((null==s?void 0:s.summary.expense)||0).toLocaleString("pt-BR")]})]})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o.Z,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Resultado"}),(0,t.jsxs)("p",{className:"text-2xl font-semibold ".concat(((null==s?void 0:s.summary.net)||0)>=0?"text-green-700":"text-red-700"),children:["R$ ",((null==s?void 0:s.summary.net)||0).toLocaleString("pt-BR")]})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Despesas por Categoria"}),(0,t.jsx)(x,{className:"w-5 h-5 text-purple-600"})]}),(0,t.jsx)("div",{className:"p-6 space-y-4",children:0===N.length?(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Sem despesas registradas neste m\xeas"}):N.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,t.jsx)("span",{className:"font-medium capitalize",children:e.key}),(0,t.jsxs)("span",{children:["R$ ",e.value.toLocaleString("pt-BR")," (",e.pct.toFixed(0),"%)"]})]}),(0,t.jsx)("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded",children:(0,t.jsx)("div",{className:"h-2 bg-purple-600 rounded",style:{width:"".concat(Math.min(100,e.pct),"%")}})})]},e.key))})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Receita por Cliente"}),(0,t.jsx)(m.Z,{className:"w-5 h-5 text-green-600"})]}),(0,t.jsx)("div",{className:"p-6 space-y-3",children:0===((null==s?void 0:s.incomeByClient)||[]).length?(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Sem recebimentos por cliente neste m\xeas"}):((null==s?void 0:s.incomeByClient)||[]).slice(0,8).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsxs)("span",{className:"text-sm",children:["R$ ",e.total.toLocaleString("pt-BR")]})]},e.client_id))})]})]})]})]})}}},function(e){e.O(0,[46,170,686,971,23,744],function(){return e(e.s=3707)}),_N_E=e.O()}]);