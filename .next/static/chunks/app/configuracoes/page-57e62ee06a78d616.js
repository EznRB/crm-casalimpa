(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{6430:function(e,t,r){Promise.resolve().then(r.bind(r,6159))},1066:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),s=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...f}=r;return(0,a.createElement)("svg",{ref:s,...n,width:l,height:l,stroke:i,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(o(e)),u].join(" "),...f},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},9832:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(1066).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9061:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(1066).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},6159:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(7437),n=r(2265),o=r(8493),s=r(9061),i=r(1066);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),c=(0,i.Z)("Contact",[["path",{d:"M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2",key:"1mghuy"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}],["line",{x1:"8",x2:"8",y1:"2",y2:"4",key:"1ff9gb"}],["line",{x1:"16",x2:"16",y1:"2",y2:"4",key:"1ufoma"}]]);var d=r(9832);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,i.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),m=(0,i.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),f=(0,i.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),h=(0,i.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);function p(){var e,t,r,i,p,y,g,x,w,b;let[v,j]=(0,n.useState)(null),[N,k]=(0,n.useState)(!0),[O,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await (0,o.tI)();e?j({id:e.id,name:e.name||"",cnpj:e.cnpj||null,phone:e.phone||"",email:e.email||"",address:e.address||{},bank_info:e.bank_info||null,logo_url:e.logo_url||null,updated_at:e.updated_at}):j({name:"",cnpj:null,phone:"",email:"",address:{},bank_info:null,logo_url:null})}finally{k(!1)}},E=(e,t)=>{j(r=>{if(!r)return r;let a={...r},n=e.split("."),o=a;for(let e=0;e<n.length-1;e++){var s;let t=n[e];o[t]=null!==(s=o[t])&&void 0!==s?s:{},o=o[t]}return o[n[n.length-1]]=t,a})},C=async()=>{if(v){_(!0);try{let e=await (0,o.A9)(v);j({...v,id:e.id}),alert("Configura\xe7\xf5es salvas com sucesso")}catch(e){alert("Erro ao salvar configura\xe7\xf5es")}finally{_(!1)}}};return N||!v?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configura\xe7\xf5es"}),(0,a.jsxs)("button",{onClick:C,disabled:O,className:"mt-3 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4 mr-2"}),O?"Salvando...":"Salvar altera\xe7\xf5es"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(l,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Dados da Empresa"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nome"}),(0,a.jsx)("input",{type:"text",value:v.name,onChange:e=>E("name",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"CNPJ"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c,{className:"h-4 w-4 text-gray-400 absolute left-3 top-2.5"}),(0,a.jsx)("input",{type:"text",value:v.cnpj||"",onChange:e=>E("cnpj",e.target.value),placeholder:"00.000.000/0000-00",className:"mt-1 block w-full pl-9 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Telefone"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-gray-400 absolute left-3 top-2.5"}),(0,a.jsx)("input",{type:"text",value:v.phone,onChange:e=>E("phone",e.target.value),placeholder:"(00) 0000-0000",className:"mt-1 block w-full pl-9 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u,{className:"h-4 w-4 text-gray-400 absolute left-3 top-2.5"}),(0,a.jsx)("input",{type:"email",value:v.email,onChange:e=>E("email",e.target.value),className:"mt-1 block w-full pl-9 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]})]})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(m,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Endere\xe7o"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rua"}),(0,a.jsx)("input",{type:"text",value:(null===(e=v.address)||void 0===e?void 0:e.street)||"",onChange:e=>E("address.street",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xfamero"}),(0,a.jsx)("input",{type:"text",value:(null===(t=v.address)||void 0===t?void 0:t.number)||"",onChange:e=>E("address.number",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bairro"}),(0,a.jsx)("input",{type:"text",value:(null===(r=v.address)||void 0===r?void 0:r.neighborhood)||"",onChange:e=>E("address.neighborhood",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cidade"}),(0,a.jsx)("input",{type:"text",value:(null===(i=v.address)||void 0===i?void 0:i.city)||"",onChange:e=>E("address.city",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),(0,a.jsx)("input",{type:"text",value:(null===(p=v.address)||void 0===p?void 0:p.state)||"",onChange:e=>E("address.state",e.target.value),placeholder:"UF",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"CEP"}),(0,a.jsx)("input",{type:"text",value:(null===(y=v.address)||void 0===y?void 0:y.zipcode)||"",onChange:e=>E("address.zipcode",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(f,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Informa\xe7\xf5es Banc\xe1rias"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Banco"}),(0,a.jsx)("input",{type:"text",value:(null===(g=v.bank_info)||void 0===g?void 0:g.bank_name)||"",onChange:e=>E("bank_info.bank_name",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ag\xeancia"}),(0,a.jsx)("input",{type:"text",value:(null===(x=v.bank_info)||void 0===x?void 0:x.agency)||"",onChange:e=>E("bank_info.agency",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Conta"}),(0,a.jsx)("input",{type:"text",value:(null===(w=v.bank_info)||void 0===w?void 0:w.account)||"",onChange:e=>E("bank_info.account",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"PIX"}),(0,a.jsx)("input",{type:"text",value:(null===(b=v.bank_info)||void 0===b?void 0:b.pix_key)||"",onChange:e=>E("bank_info.pix_key",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(h,{className:"h-5 w-5 text-primary-600 mr-2"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Marca"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"URL do Logo"}),(0,a.jsx)("input",{type:"text",value:v.logo_url||"",onChange:e=>E("logo_url",e.target.value),placeholder:"https://...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),v.logo_url?(0,a.jsx)("div",{className:"border rounded-md p-4 bg-gray-50",children:(0,a.jsx)("img",{src:v.logo_url,alt:"Logo",className:"h-16"})}):null]})]})})]})]})}},8493:function(e,t,r){"use strict";r.d(t,{$J:function(){return j},A9:function(){return Z},BX:function(){return v},By:function(){return x},CF:function(){return p},FG:function(){return m},G6:function(){return c},HG:function(){return E},J5:function(){return q},KB:function(){return _},LA:function(){return o},OL:function(){return n},Ol:function(){return D},Ov:function(){return u},P6:function(){return C},Pc:function(){return w},Pg:function(){return d},QR:function(){return M},Rt:function(){return I},Ts:function(){return y},U2:function(){return i},UO:function(){return A},V2:function(){return g},Z$:function(){return h},fN:function(){return N},fg:function(){return b},h4:function(){return R},hH:function(){return k},np:function(){return L},p9:function(){return f},r8:function(){return S},tI:function(){return O},tt:function(){return P},wK:function(){return s},wo:function(){return l},xd:function(){return z},yo:function(){return J}});var a=r(4316);async function n(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("customers").select("*").order("name");if(t)throw t;return e||[]}async function o(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("customers").delete().eq("id",e);if(t)throw t}async function s(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("customers").insert([e]).select("*").single();if(r)throw r;return t}async function i(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("services").select("*").order("name");if(t)throw t;return e||[]}async function l(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("services").delete().eq("id",e);if(t)throw t}async function c(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("services").insert([e]).select("*").single();if(r)throw r;return t}async function d(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:n}=await a.O.from("services").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function u(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").order("issue_date",{ascending:!1});if(t)throw t;return e||[]}async function m(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").eq("id",e).single();if(r)throw r;return t||null}async function f(e){if(!a.O)throw Error("Supabase n\xe3o configurado");if(!e||0===e.length)return[];let{data:t,error:r}=await a.O.from("invoices").select("appointment_id").in("appointment_id",e);if(r)throw r;return t||[]}async function h(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("invoices").insert([e]).select("*").single();if(r)throw r;return t}async function p(e,t){let r=await fetch("/api/invoices/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha ao atualizar fatura")}}async function y(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("appointments").select("*, customers (name, phone), services (name, duration_minutes)");if(t)throw t;return e||[]}async function g(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("appointments").delete().eq("id",e);if(t)throw t}async function x(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("appointments").select("*");if(t)throw t;return e||[]}async function w(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("appointments").insert([e]).select("*").single();if(r)throw r;return t}async function b(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("appointments").select("*, customers (name, phone, email), services (name, duration_minutes)");if(t)throw t;return e||[]}async function v(e){let t,r;if(!a.O)throw Error("Supabase n\xe3o configurado");if(e&&/^\d{4}-\d{2}$/.test(e)){let[a,n]=e.split("-").map(Number),o=new Date(Date.UTC(a,n-1,1)),s=new Date(Date.UTC(a,n,1));t=o.toISOString().slice(0,10),r=s.toISOString().slice(0,10)}let n=a.O.from("cashflow_transactions").select("id, type, category, amount, transaction_date, client_id");t&&r&&(n=n.gte("transaction_date",t).lt("transaction_date",r));let{data:o,error:s}=await n;if(s)throw s;let i=(o||[]).filter(e=>"income"===e.type).reduce((e,t)=>e+Number(t.amount||0),0),l=(o||[]).filter(e=>"expense"===e.type).reduce((e,t)=>e+Number(t.amount||0),0),c={};(o||[]).filter(e=>"expense"===e.type).forEach(e=>{let t=e.category||"outros";c[t]=(c[t]||0)+Number(e.amount||0)});let d=[],u=Array.from(new Set((o||[]).filter(e=>"income"===e.type&&e.client_id).map(e=>e.client_id)));if(u.length>0){let{data:e}=await a.O.from("customers").select("id, name").in("id",u),t={};(o||[]).filter(e=>"income"===e.type&&e.client_id).forEach(e=>{let r=e.client_id;t[r]=(t[r]||0)+Number(e.amount||0)}),(d=(e||[]).map(e=>({client_id:e.id,name:e.name,total:t[e.id]||0}))).sort((e,t)=>t.total-e.total)}return{month:e||null,summary:{income:i,expense:l,net:i-l},expenseByCategory:c,incomeByClient:d}}async function j(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t={type:"expense",category:e.category||"other",amount:Number(e.amount||0),transaction_date:(e.date||new Date().toISOString()).slice(0,10),description:e.description||null};if(!t.amount||t.amount<=0)throw Error("Valor inv\xe1lido");let{data:r,error:n}=await a.O.from("cashflow_transactions").insert(t).select("*").single();if(n)throw n;return r}async function N(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("employees").select("*");if(t)throw t;return e||[]}async function k(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("employee_work_records").select("*").eq("employeeId",e);if(r)throw r;return t||[]}async function O(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e}=await a.O.from("company").select("*").single();return e||null}async function _(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("employees").select("*").eq("id",e).single();if(r)throw r;return t||null}async function S(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t=(e.cpf||"").toString().replace(/\D/g,"");if(!t)throw Error("CPF inv\xe1lido");let{data:r}=await a.O.from("employees").select("id").eq("cpf",t).limit(1);if(r&&r.length>0)throw Error("CPF j\xe1 cadastrado");let{error:n}=await a.O.from("employees").insert([{...e,cpf:t}]);if(n)throw n}async function E(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let r=(t.cpf||"").toString().replace(/\D/g,"");if(r){let{data:t}=await a.O.from("employees").select("id").eq("cpf",r).neq("id",e).limit(1);if(t&&t.length>0)throw Error("CPF j\xe1 cadastrado")}let{error:n}=await a.O.from("employees").update({...t,cpf:r||t.cpf}).eq("id",e);if(n)throw n}async function C(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("employees").delete().eq("id",e);if(t)throw t}async function q(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t={employeeId:e.employeeId,workDate:e.workDate,workDays:e.workDays,dailyRate:e.dailyRate,totalAmount:Number(e.dailyRate||0)*Number(e.workDays||0),notes:e.notes||null,paid:!1},{error:r}=await a.O.from("employee_work_records").insert([t]);if(r)throw r}async function I(e,t){let r=await fetch("/api/employees/work-records/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paid:t})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha ao atualizar registro de trabalho")}}async function Z(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let t={name:e.name,cnpj:e.cnpj,phone:e.phone,email:e.email,address:e.address,bank_info:e.bank_info,logo_url:e.logo_url,updated_at:new Date().toISOString()};if(e.id){let{data:r,error:n}=await a.O.from("company").update(t).eq("id",e.id).select("*").single();if(n)throw n;return r}{let{data:e,error:r}=await a.O.from("company").insert(t).select("*").single();if(r)throw r;return e}}async function M(){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:t}=await a.O.from("quotes").select("*, customers (name, phone), services (name)");if(t){if("PGRST205"===t.code)return[];throw t}return(e||[]).sort((e,t)=>(t.created_at||"").localeCompare(e.created_at||""))}async function P(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("quotes").select("*, customers (*), services (*), quote_items (*), quote_images (*)").eq("id",e).single();if(r){if("PGRST205"===r.code)return null;throw r}return t||null}async function D(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("quotes").insert([e]).select("*").single();if(r)throw r;return t}async function z(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:n}=await a.O.from("quotes").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function A(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("quotes").delete().eq("id",e);if(t)throw t}async function R(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:r}=await a.O.from("quote_items").insert([e]).select("*").single();if(r)throw r;return t}async function J(e,t){if(!a.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:n}=await a.O.from("quote_items").update(t).eq("id",e).select("*").single();if(n)throw n;return r}async function L(e){if(!a.O)throw Error("Supabase n\xe3o configurado");let{error:t}=await a.O.from("quote_items").delete().eq("id",e);if(t)throw t}},4316:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var a=r(4170);let n="https://hyygforlvwbbdzpctnid.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5eWdmb3JsdndiYmR6cGN0bmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNjY1NjksImV4cCI6MjA3ODg0MjU2OX0.1ih4fZRYRzg1oqZxAYonDPi5wO2-DHvb7anjcSPWeqs",s="string"==typeof n&&"string"==typeof o&&n.startsWith("https://")&&n.includes(".supabase.co")&&!n.includes("example.supabase.co")&&o.length>20?(0,a.createBrowserClient)(n,o):null}},function(e){e.O(0,[46,170,971,23,744],function(){return e(e.s=6430)}),_N_E=e.O()}]);