(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{3324:function(e,t,a){Promise.resolve().then(a.bind(a,4999))},4241:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(1066).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2023:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(1066).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},4999:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),r=a(2265),l=a(7138),n=a(8493),c=a(2513),i=a(4241),o=a(6649),d=a(2023),x=a(883);function u(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),g=(0,r.useMemo)(()=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),[]);(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await (0,n.QR)();t(e||[])}catch(e){console.error("Erro ao buscar or\xe7amentos:",e),alert("Erro ao carregar or\xe7amentos")}finally{u(!1)}},v=async a=>{if(confirm("Tem certeza que deseja excluir este or\xe7amento?"))try{await (0,n.UO)(a),t(e.filter(e=>e.id!==a)),alert("Or\xe7amento exclu\xeddo com sucesso!")}catch(e){console.error("Erro ao excluir or\xe7amento:",e),alert("Erro ao excluir or\xe7amento")}},j=e.filter(e=>{var t,a;let s=((null===(t=e.customers)||void 0===t?void 0:t.name)||"").toLowerCase().includes(m.toLowerCase())||((null===(a=e.services)||void 0===a?void 0:a.name)||"").toLowerCase().includes(m.toLowerCase()),r=!h||e.status===h;return s&&r}).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return a?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Or\xe7amentos"}),(0,s.jsxs)(l.default,{href:"/orcamentos/novo",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Novo Or\xe7amento"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"p-4 border-b grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,s.jsx)("input",{type:"text",placeholder:"Buscar por cliente ou servi\xe7o...",value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsxs)("select",{value:h,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Todos os status"}),(0,s.jsx)("option",{value:"rascunho",children:"Rascunho"}),(0,s.jsx)("option",{value:"enviado",children:"Enviado"}),(0,s.jsx)("option",{value:"aceito",children:"Aceito"}),(0,s.jsx)("option",{value:"recusado",children:"Recusado"}),(0,s.jsx)("option",{value:"expirado",children:"Expirado"})]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Servi\xe7o"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resid\xeancia"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc1rea"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modalidade"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validade"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(e=>{var t,a,r,n;return(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.customers)||void 0===t?void 0:t.name)||"—"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:(null===(a=e.customers)||void 0===a?void 0:a.phone)||""})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(r=e.services)||void 0===r?void 0:r.name)||"—"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(n=e.residence_type)||void 0===n?void 0:n.toUpperCase())||"—"}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.area_m2," m\xb2"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.service_modality}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.format(Number(e.total||0))}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-gray-400"}),e.valid_until?new Date(e.valid_until).toLocaleDateString("pt-BR"):"—"]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("aceito"===e.status?"bg-green-100 text-green-800":"recusado"===e.status?"bg-red-100 text-red-800":"enviado"===e.status?"bg-blue-100 text-blue-800":"expirado"===e.status?"bg-gray-200 text-gray-700":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(l.default,{href:"/orcamentos/".concat(e.id),className:"text-blue-600 hover:text-blue-900",children:(0,s.jsx)(o.Z,{className:"w-4 h-4"})}),(0,s.jsx)(l.default,{href:"/api/orcamentos/".concat(e.id,"/pdf"),className:"text-gray-700 hover:text-gray-900",target:"_blank",children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(x.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]}),0===j.length&&(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("div",{className:"text-gray-600 mb-3",children:"Nenhum or\xe7amento encontrado"}),(0,s.jsxs)(l.default,{href:"/orcamentos/novo",className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"})," Criar or\xe7amento"]})]})]})]})]})}}},function(e){e.O(0,[46,170,138,436,971,23,744],function(){return e(e.s=3324)}),_N_E=e.O()}]);