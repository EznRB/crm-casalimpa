(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{8286:function(e,r,t){Promise.resolve().then(t.bind(t,2807))},1066:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var o=t(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,r)=>{let t=(0,o.forwardRef)((t,i)=>{let{color:s="currentColor",size:u=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:d="",children:m,...f}=t;return(0,o.createElement)("svg",{ref:i,...n,width:u,height:u,stroke:s,strokeWidth:l?24*Number(c)/Number(u):c,className:["lucide","lucide-".concat(a(e)),d].join(" "),...f},[...r.map(e=>{let[r,t]=e;return(0,o.createElement)(r,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},5137:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6463:function(e,r,t){"use strict";var o=t(1169);t.o(o,"useParams")&&t.d(r,{useParams:function(){return o.useParams}}),t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}})},2807:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var o=t(7437),n=t(2265),a=t(6463),i=t(8493),s=t(5137),u=t(7138);function c(){let e=(0,a.useRouter)(),[r,t]=(0,n.useState)(!1),[c,l]=(0,n.useState)({name:"",email:"",phone:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""},notes:""}),d=async r=>{r.preventDefault(),t(!0);try{await (0,i.wK)(c),e.push("/clientes")}catch(e){console.error("Erro ao criar cliente:",e),alert("Erro ao criar cliente")}finally{t(!1)}},m=(e,r)=>{l(t=>({...t,address:{...t.address,[e]:r}}))};return(0,o.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)(u.default,{href:"/clientes",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[(0,o.jsx)(s.Z,{className:"h-4 w-4 mr-1"}),"Voltar para Clientes"]})}),(0,o.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Novo Cliente"})}),(0,o.jsxs)("form",{onSubmit:d,className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome *"}),(0,o.jsx)("input",{type:"text",id:"name",required:!0,value:c.name,onChange:e=>l(r=>({...r,name:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email *"}),(0,o.jsx)("input",{type:"email",id:"email",required:!0,value:c.email,onChange:e=>l(r=>({...r,email:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telefone *"}),(0,o.jsx)("input",{type:"tel",id:"phone",required:!0,value:c.phone,onChange:e=>l(r=>({...r,phone:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Endere\xe7o"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Rua *"}),(0,o.jsx)("input",{type:"text",id:"street",required:!0,value:c.address.street,onChange:e=>m("street",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"number",className:"block text-sm font-medium text-gray-700",children:"N\xfamero *"}),(0,o.jsx)("input",{type:"text",id:"number",required:!0,value:c.address.number,onChange:e=>m("number",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"complement",className:"block text-sm font-medium text-gray-700",children:"Complemento"}),(0,o.jsx)("input",{type:"text",id:"complement",value:c.address.complement,onChange:e=>m("complement",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"neighborhood",className:"block text-sm font-medium text-gray-700",children:"Bairro *"}),(0,o.jsx)("input",{type:"text",id:"neighborhood",required:!0,value:c.address.neighborhood,onChange:e=>m("neighborhood",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Cidade *"}),(0,o.jsx)("input",{type:"text",id:"city",required:!0,value:c.address.city,onChange:e=>m("city",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"Estado *"}),(0,o.jsx)("input",{type:"text",id:"state",required:!0,maxLength:2,value:c.address.state,onChange:e=>m("state",e.target.value.toUpperCase()),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"CEP *"}),(0,o.jsx)("input",{type:"text",id:"zipCode",required:!0,value:c.address.zipCode,onChange:e=>m("zipCode",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Observa\xe7\xf5es"}),(0,o.jsx)("textarea",{id:"notes",rows:3,value:c.notes,onChange:e=>l(r=>({...r,notes:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,o.jsx)(u.default,{href:"/clientes",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",disabled:r,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Salvando...":"Salvar Cliente"})]})]})]})]})}},8493:function(e,r,t){"use strict";t.d(r,{$J:function(){return v},A9:function(){return F},BX:function(){return O},By:function(){return g},CF:function(){return h},FG:function(){return m},G6:function(){return c},HG:function(){return _},J5:function(){return q},KB:function(){return E},LA:function(){return a},OL:function(){return n},Ol:function(){return R},Ov:function(){return d},P6:function(){return C},Pc:function(){return b},Pg:function(){return l},QR:function(){return P},Rt:function(){return I},Ts:function(){return w},U2:function(){return s},UO:function(){return J},V2:function(){return y},Z$:function(){return p},fN:function(){return j},fg:function(){return x},h4:function(){return A},hH:function(){return N},np:function(){return T},p9:function(){return f},r8:function(){return k},tI:function(){return S},tt:function(){return D},wK:function(){return i},wo:function(){return u},xd:function(){return z},yo:function(){return Z}});var o=t(4316);async function n(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("customers").select("*").order("name");if(r)throw r;return e||[]}async function a(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{error:r}=await o.O.from("customers").delete().eq("id",e);if(r)throw r}async function i(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("customers").insert([e]).select("*").single();if(t)throw t;return r}async function s(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("services").select("*").order("name");if(r)throw r;return e||[]}async function u(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{error:r}=await o.O.from("services").delete().eq("id",e);if(r)throw r}async function c(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("services").insert([e]).select("*").single();if(t)throw t;return r}async function l(e,r){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:n}=await o.O.from("services").update(r).eq("id",e).select("*").single();if(n)throw n;return t}async function d(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").order("issue_date",{ascending:!1});if(r)throw r;return e||[]}async function m(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("invoices").select("\n      id,\n      invoice_number,\n      issue_date,\n      due_date,\n      subtotal,\n      tax,\n      total,\n      status,\n      pdf_url,\n      appointments ( customers (name), services (name) )\n    ").eq("id",e).single();if(t)throw t;return r||null}async function f(e){if(!o.O)throw Error("Supabase n\xe3o configurado");if(!e||0===e.length)return[];let{data:r,error:t}=await o.O.from("invoices").select("appointment_id").in("appointment_id",e);if(t)throw t;return r||[]}async function p(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("invoices").insert([e]).select("*").single();if(t)throw t;return r}async function h(e,r){let t=await fetch("/api/invoices/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha ao atualizar fatura")}}async function w(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("appointments").select("*, customers (name, phone), services (name, duration_minutes)");if(r)throw r;return e||[]}async function y(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{error:r}=await o.O.from("appointments").delete().eq("id",e);if(r)throw r}async function g(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("appointments").select("*");if(r)throw r;return e||[]}async function b(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("appointments").insert([e]).select("*").single();if(t)throw t;return r}async function x(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("appointments").select("*, customers (name, phone, email), services (name, duration_minutes)");if(r)throw r;return e||[]}async function O(e){let r,t;if(!o.O)throw Error("Supabase n\xe3o configurado");if(e&&/^\d{4}-\d{2}$/.test(e)){let[o,n]=e.split("-").map(Number),a=new Date(Date.UTC(o,n-1,1)),i=new Date(Date.UTC(o,n,1));r=a.toISOString().slice(0,10),t=i.toISOString().slice(0,10)}let n=o.O.from("cashflow_transactions").select("id, type, category, amount, transaction_date, client_id");r&&t&&(n=n.gte("transaction_date",r).lt("transaction_date",t));let{data:a,error:i}=await n;if(i)throw i;let s=(a||[]).filter(e=>"income"===e.type).reduce((e,r)=>e+Number(r.amount||0),0),u=(a||[]).filter(e=>"expense"===e.type).reduce((e,r)=>e+Number(r.amount||0),0),c={};(a||[]).filter(e=>"expense"===e.type).forEach(e=>{let r=e.category||"outros";c[r]=(c[r]||0)+Number(e.amount||0)});let l=[],d=Array.from(new Set((a||[]).filter(e=>"income"===e.type&&e.client_id).map(e=>e.client_id)));if(d.length>0){let{data:e}=await o.O.from("customers").select("id, name").in("id",d),r={};(a||[]).filter(e=>"income"===e.type&&e.client_id).forEach(e=>{let t=e.client_id;r[t]=(r[t]||0)+Number(e.amount||0)}),(l=(e||[]).map(e=>({client_id:e.id,name:e.name,total:r[e.id]||0}))).sort((e,r)=>r.total-e.total)}return{month:e||null,summary:{income:s,expense:u,net:s-u},expenseByCategory:c,incomeByClient:l}}async function v(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let r={type:"expense",category:e.category||"other",amount:Number(e.amount||0),transaction_date:(e.date||new Date().toISOString()).slice(0,10),description:e.description||null};if(!r.amount||r.amount<=0)throw Error("Valor inv\xe1lido");let{data:t,error:n}=await o.O.from("cashflow_transactions").insert(r).select("*").single();if(n)throw n;return t}async function j(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("employees").select("*");if(r)throw r;return e||[]}async function N(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("employee_work_records").select("*").eq("employeeId",e);if(t)throw t;return r||[]}async function S(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e}=await o.O.from("company").select("*").single();return e||null}async function E(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("employees").select("*").eq("id",e).single();if(t)throw t;return r||null}async function k(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let r=(e.cpf||"").toString().replace(/\D/g,"");if(!r)throw Error("CPF inv\xe1lido");let{data:t}=await o.O.from("employees").select("id").eq("cpf",r).limit(1);if(t&&t.length>0)throw Error("CPF j\xe1 cadastrado");let{error:n}=await o.O.from("employees").insert([{...e,cpf:r}]);if(n)throw n}async function _(e,r){if(!o.O)throw Error("Supabase n\xe3o configurado");let t=(r.cpf||"").toString().replace(/\D/g,"");if(t){let{data:r}=await o.O.from("employees").select("id").eq("cpf",t).neq("id",e).limit(1);if(r&&r.length>0)throw Error("CPF j\xe1 cadastrado")}let{error:n}=await o.O.from("employees").update({...r,cpf:t||r.cpf}).eq("id",e);if(n)throw n}async function C(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{error:r}=await o.O.from("employees").delete().eq("id",e);if(r)throw r}async function q(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let r={employeeId:e.employeeId,workDate:e.workDate,workDays:e.workDays,dailyRate:e.dailyRate,totalAmount:Number(e.dailyRate||0)*Number(e.workDays||0),notes:e.notes||null,paid:!1},{error:t}=await o.O.from("employee_work_records").insert([r]);if(t)throw t}async function I(e,r){let t=await fetch("/api/employees/work-records/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({paid:r})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error((null==e?void 0:e.error)||"Falha ao atualizar registro de trabalho")}}async function F(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let r={name:e.name,cnpj:e.cnpj,phone:e.phone,email:e.email,address:e.address,bank_info:e.bank_info,logo_url:e.logo_url,updated_at:new Date().toISOString()};if(e.id){let{data:t,error:n}=await o.O.from("company").update(r).eq("id",e.id).select("*").single();if(n)throw n;return t}{let{data:e,error:t}=await o.O.from("company").insert(r).select("*").single();if(t)throw t;return e}}async function P(){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:e,error:r}=await o.O.from("quotes").select("*, customers (name, phone), services (name)");if(r){if("PGRST205"===r.code)return[];throw r}return(e||[]).sort((e,r)=>(r.created_at||"").localeCompare(e.created_at||""))}async function D(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("quotes").select("*, customers (*), services (*), quote_items (*), quote_images (*)").eq("id",e).single();if(t){if("PGRST205"===t.code)return null;throw t}return r||null}async function R(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("quotes").insert([e]).select("*").single();if(t)throw t;return r}async function z(e,r){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:n}=await o.O.from("quotes").update(r).eq("id",e).select("*").single();if(n)throw n;return t}async function J(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{error:r}=await o.O.from("quotes").delete().eq("id",e);if(r)throw r}async function A(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:r,error:t}=await o.O.from("quote_items").insert([e]).select("*").single();if(t)throw t;return r}async function Z(e,r){if(!o.O)throw Error("Supabase n\xe3o configurado");let{data:t,error:n}=await o.O.from("quote_items").update(r).eq("id",e).select("*").single();if(n)throw n;return t}async function T(e){if(!o.O)throw Error("Supabase n\xe3o configurado");let{error:r}=await o.O.from("quote_items").delete().eq("id",e);if(r)throw r}},4316:function(e,r,t){"use strict";t.d(r,{O:function(){return i}});var o=t(4170);let n="https://hyygforlvwbbdzpctnid.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5eWdmb3JsdndiYmR6cGN0bmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNjY1NjksImV4cCI6MjA3ODg0MjU2OX0.1ih4fZRYRzg1oqZxAYonDPi5wO2-DHvb7anjcSPWeqs",i="string"==typeof n&&"string"==typeof a&&n.startsWith("https://")&&n.includes(".supabase.co")&&!n.includes("example.supabase.co")&&a.length>20?(0,o.createBrowserClient)(n,a):null}},function(e){e.O(0,[46,170,138,971,23,744],function(){return e(e.s=8286)}),_N_E=e.O()}]);